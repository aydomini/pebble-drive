<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PebbleDrive - è½»é‡çº§äº‘å­˜å‚¨</title>

    <!-- PWA æ”¯æŒ -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="PebbleDrive">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">

    <!-- SEO ä¼˜åŒ– -->
    <meta name="description" content="åŸºäº Cloudflare çš„å…è´¹è½»é‡çº§ç§äººäº‘å­˜å‚¨ï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€åˆ†äº«ã€é¢„è§ˆï¼Œå®Œå…¨å…è´¹ï¼Œå…¨çƒCDNåŠ é€Ÿ">
    <meta name="keywords" content="äº‘å­˜å‚¨,æ–‡ä»¶åˆ†äº«,Cloudflare,å…è´¹å­˜å‚¨,PWA,ç§äººäº‘ç›˜">
    <meta name="author" content="PebbleDrive">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="PebbleDrive - è½»é‡çº§äº‘å­˜å‚¨">
    <meta property="og:description" content="åŸºäº Cloudflare çš„å…è´¹è½»é‡çº§ç§äººäº‘å­˜å‚¨">
    <meta property="og:image" content="/logo.svg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="PebbleDrive - è½»é‡çº§äº‘å­˜å‚¨">
    <meta property="twitter:description" content="åŸºäº Cloudflare çš„å…è´¹è½»é‡çº§ç§äººäº‘å­˜å‚¨">
    <meta property="twitter:image" content="/logo.svg">

    <script>
        // éšè— Vite å¼€å‘æœåŠ¡å™¨çš„è¿æ¥æ—¥å¿—
        (function() {
            const originalLog = console.log;
            console.log = function(...args) {
                // è¿‡æ»¤æ‰ Vite çš„è¿æ¥æ¶ˆæ¯
                const message = args[0];
                if (typeof message === 'string' && (
                    message.includes('[vite] connecting') ||
                    message.includes('[vite] connected')
                )) {
                    return; // ä¸è¾“å‡º
                }
                originalLog.apply(console, args);
            };
        })();
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Tailwind CDN é…ç½®
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Markdown è§£æåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- ä»£ç é«˜äº®åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="hljs-light">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-dark" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        /* å¤œé—´ä¸»é¢˜å˜é‡ */
        :root {
            --bg-primary: #f9fafb;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f3f4f6;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        .dark {
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --bg-tertiary: #374151;
            --text-primary: #f9fafb;
            --text-secondary: #9ca3af;
            --border-color: #4b5563;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        /* åŸºç¡€æ ·å¼ä½¿ç”¨ CSS å˜é‡ */
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
        }

        .drag-area {
            border: 2px dashed #cbd5e1;
            transition: all 0.3s ease;
        }
        .drag-area.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        .dark .drag-area.dragover {
            background-color: #1e3a8a;
        }
        .file-item {
            transition: all 0.2s ease;
        }
        .file-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px var(--shadow);
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }

        /* Markdown å’Œä»£ç é¢„è§ˆæ ·å¼ */
        .markdown-preview {
            line-height: 1.6;
        }
        .markdown-preview h1 { font-size: 2em; font-weight: bold; margin-top: 0.5em; margin-bottom: 0.5em; }
        .markdown-preview h2 { font-size: 1.5em; font-weight: bold; margin-top: 0.5em; margin-bottom: 0.5em; }
        .markdown-preview h3 { font-size: 1.25em; font-weight: bold; margin-top: 0.5em; margin-bottom: 0.5em; }
        .markdown-preview p { margin-bottom: 1em; }
        .markdown-preview ul, .markdown-preview ol { margin-left: 2em; margin-bottom: 1em; }
        .markdown-preview li { margin-bottom: 0.25em; }
        .markdown-preview code { background-color: #f3f4f6; padding: 0.2em 0.4em; border-radius: 3px; font-size: 0.9em; }
        .markdown-preview pre { background-color: #f6f8fa; padding: 1em; border-radius: 6px; overflow-x: hidden; overflow-y: auto; white-space: pre-wrap; word-break: break-word; margin-bottom: 1em; }
        .dark .markdown-preview code { background-color: #374151; color: #e5e7eb; }
        .dark .markdown-preview pre { background-color: #1f2937; }
        .markdown-preview pre code { background-color: transparent; padding: 0; }
        .markdown-preview blockquote { border-left: 4px solid #e5e7eb; padding-left: 1em; margin-left: 0; color: #6b7280; }
        .dark .markdown-preview blockquote { border-left-color: #4b5563; color: #9ca3af; }
        .markdown-preview a { color: #2563eb; text-decoration: underline; }
        .dark .markdown-preview a { color: #60a5fa; }
        .markdown-preview table { border-collapse: collapse; width: 100%; margin-bottom: 1em; }
        .markdown-preview th, .markdown-preview td { border: 1px solid #e5e7eb; padding: 0.5em; }
        .dark .markdown-preview th, .dark .markdown-preview td { border-color: #4b5563; }
        .markdown-preview th { background-color: #f9fafb; font-weight: bold; }
        .dark .markdown-preview th { background-color: #374151; }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ï¼ˆæ”¯æŒå¤œé—´æ¨¡å¼ï¼‰ */
        /* Webkit æµè§ˆå™¨ (Chrome, Safari, Edge) */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
            transition: background 0.2s;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* å¤œé—´æ¨¡å¼æ»šåŠ¨æ¡ */
        .dark ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #4b5563;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }

        /* Firefox æ»šåŠ¨æ¡ */
        * {
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f1f5f9;
        }
        .dark * {
            scrollbar-color: #4b5563 #1f2937;
        }

        /* é¢„è§ˆåŒºåŸŸä¸“ç”¨æ»šåŠ¨æ¡æ ·å¼ï¼ˆæ›´æ˜æ˜¾ï¼‰ */
        #previewArea::-webkit-scrollbar,
        #mobilePreviewArea::-webkit-scrollbar {
            width: 10px;
        }
        #previewArea::-webkit-scrollbar-track,
        #mobilePreviewArea::-webkit-scrollbar-track {
            background: #e5e7eb;
            border-radius: 5px;
        }
        #previewArea::-webkit-scrollbar-thumb,
        #mobilePreviewArea::-webkit-scrollbar-thumb {
            background: #9ca3af;
            border-radius: 5px;
        }
        #previewArea::-webkit-scrollbar-thumb:hover,
        #mobilePreviewArea::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }

        /* å¤œé—´æ¨¡å¼é¢„è§ˆåŒºåŸŸæ»šåŠ¨æ¡ */
        .dark #previewArea::-webkit-scrollbar-track,
        .dark #mobilePreviewArea::-webkit-scrollbar-track {
            background: #374151;
        }
        .dark #previewArea::-webkit-scrollbar-thumb,
        .dark #mobilePreviewArea::-webkit-scrollbar-thumb {
            background: #6b7280;
        }
        .dark #previewArea::-webkit-scrollbar-thumb:hover,
        .dark #mobilePreviewArea::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        /* Turnstile éªŒè¯æ¡†æ ·å¼çº¦æŸ */
        #turnstile-container {
            max-width: 100%;
            box-sizing: border-box;
        }
        /* å¼ºåˆ¶ Turnstile iframe ä¸è¶…å‡ºå®¹å™¨ */
        #turnstile-container iframe {
            max-width: 100% !important;
            width: 100% !important;
            box-sizing: border-box !important;
        }
        /* åœ¨å°å±å¹•ä¸Šä½¿ç”¨ transform scale ç¼©æ”¾ Turnstile */
        @media (max-width: 400px) {
            #turnstile-container > div {
                transform-origin: 0 0;
                width: 300px !important; /* Turnstile normal å›ºå®šå®½åº¦ */
            }
        }
    </style>
    <!-- Cloudflare Turnstile -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit" async defer></script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen flex flex-col transition-colors">
    <!-- ç™»å½•ç•Œé¢ï¼ˆé»˜è®¤æ˜¾ç¤ºï¼‰ -->
    <div id="loginScreen" class="flex-1 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 w-full max-w-md transition-colors">
            <div class="flex items-center justify-center gap-3 mb-8">
                <!-- Logo -->
                <img src="/logo.svg" alt="PebbleDrive" class="w-12 h-12 flex-shrink-0 transition-all" />
                <!-- æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ -->
                <div>
                    <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2" data-i18n="appTitle">
                        PebbleDrive
                    </h1>
                    <div class="flex items-center">
                        <p class="text-gray-600 dark:text-gray-300" data-i18n="appSubtitle">è½»é‡çº§äº‘å­˜å‚¨</p>
                        <a href="#" id="loginVersionLink" class="text-xs text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition ml-2" target="_blank" rel="noopener noreferrer" title="View on GitHub">
                            v1.0.0
                        </a>
                    </div>
                </div>
            </div>

            <form id="loginForm" class="space-y-6">
                <div>
                    <label for="loginPassword" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        <i class="fas fa-lock mr-1"></i><span data-i18n="accessPassword">è®¿é—®å¯†ç </span>
                    </label>
                    <input
                        type="password"
                        id="loginPassword"
                        class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100 transition"
                        placeholder="è¯·è¾“å…¥è®¿é—®å¯†ç "
                        data-i18n-placeholder="passwordPlaceholder"
                        required
                        autocomplete="current-password"
                    >
                    <!-- DEMO æ¨¡å¼æç¤º -->
                    <div class="mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded text-xs text-blue-700 dark:text-blue-300">
                        <i class="fas fa-info-circle mr-1"></i>
                        <span data-i18n="demoLoginHint">ğŸ’¡ æ¼”ç¤ºæ¨¡å¼ï¼šè¾“å…¥ä»»æ„å¯†ç å³å¯ç™»å½•ä½“éªŒ</span>
                    </div>
                </div>

                <!-- Turnstile å®¹å™¨ (å¯é€‰ï¼Œéœ€è¦é…ç½® Site Key) -->
                <!-- æ·»åŠ  overflow-hidden é˜²æ­¢æº¢å‡ºï¼Œmax-w-full ç¡®ä¿ä¸è¶…å‡ºçˆ¶å®¹å™¨ -->
                <div id="turnstile-container" class="hidden w-full overflow-hidden">
                    <!-- Turnstile widget å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
                </div>

                <button
                    type="submit"
                    id="loginBtn"
                    class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition flex items-center justify-center"
                >
                    <i class="fas fa-sign-in-alt mr-2"></i>
                    <span id="loginBtnText" data-i18n="loginBtn">ç™»å½•</span>
                </button>

                <div id="loginError" class="hidden bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 px-4 py-3 rounded-lg text-sm border border-red-200 dark:border-red-800">
                    <i class="fas fa-exclamation-circle mr-2"></i>
                    <span id="loginErrorText"></span>
                </div>
            </form>
        </div>
    </div>

    <!-- ä¸»åº”ç”¨ç•Œé¢ï¼ˆç™»å½•åæ˜¾ç¤ºï¼‰ -->
    <div id="appScreen" class="flex-1 flex flex-col" style="display: none;">
    <!-- DEMO æ¨¡å¼æ¨ªå¹… -->
    <div id="demoBanner" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-4 text-center text-sm font-medium shadow-md">
        <i class="fas fa-info-circle mr-2"></i>
        <span data-i18n="demoBanner">ğŸ“ æ¼”ç¤ºæ¨¡å¼ï¼šä»»æ„å¯†ç å¯ç™»å½•ï¼Œæ‰€æœ‰æ“ä½œä»…åœ¨æµè§ˆå™¨æœ¬åœ°è¿›è¡Œï¼Œåˆ·æ–°åæ•°æ®é‡ç½®</span>
    </div>

    <header class="bg-white dark:bg-gray-800 shadow-sm border-b dark:border-gray-700 transition-colors">
        <div class="max-w-7xl mx-auto px-8 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <img src="/logo.svg" alt="PebbleDrive" class="w-6 h-6 transition-all" />
                    <h1 class="text-xl font-bold text-gray-800 dark:text-gray-100" data-i18n="appTitle">PebbleDrive</h1>
                    <!-- ç‰ˆæœ¬å·é“¾æ¥ -->
                    <a href="#" id="appVersionLink" class="text-xs text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition ml-2" target="_blank" rel="noopener noreferrer" title="View on GitHub">
                        v1.0.0
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- è¯­è¨€åˆ‡æ¢æŒ‰é’® -->
                    <button id="langToggle" class="text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition" data-i18n-title="langToggle" title="åˆ‡æ¢è¯­è¨€">
                        <i class="fas fa-language"></i>
                    </button>
                    <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
                    <button id="themeToggle" class="text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition" data-i18n-title="themeToggle" title="åˆ‡æ¢ä¸»é¢˜">
                        <i class="fas fa-moon dark-icon"></i>
                        <i class="fas fa-sun light-icon hidden"></i>
                    </button>
                    <button id="logoutBtn" class="text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition" data-i18n-title="logout" title="ç™»å‡º">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-1 flex p-5 overflow-auto min-h-0">
        <div class="w-full md:max-w-6xl lg:max-w-7xl mx-auto">
            <!-- å¡ç‰‡å¼å¸ƒå±€ï¼šæ¡Œé¢ç«¯å·¦å³å¸ƒå±€ï¼Œç§»åŠ¨ç«¯ä¸Šä¸‹å¸ƒå±€ -->
            <!-- æ‰€æœ‰è®¾å¤‡å›ºå®šé«˜åº¦ï¼Œé¿å…æ•´é¡µæ»šåŠ¨ -->
            <!-- é«˜åº¦è®¡ç®—ï¼š100vh - Header(56px) - Main padding(40px) = 100vh - 96px -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-5 h-[calc(100vh-96px)]">
                <!-- å·¦ä¾§åˆ—/ä¸Šæ–¹åŒºåŸŸï¼šä¸Šä¼ å¡ç‰‡ + æ–‡ä»¶åˆ—è¡¨å¡ç‰‡ -->
                <!-- æ‰€æœ‰è®¾å¤‡å¡«å……é«˜åº¦ï¼Œä½¿ç”¨ flex åˆ†é…æ¯”ä¾‹ -->
                <div class="md:col-span-1 flex flex-col gap-5 h-full min-h-0">
                    <!-- ä¸Šä¼ å¡ç‰‡ (æ‰€æœ‰è®¾å¤‡ flex-1 æŒ‰æ¯”ä¾‹åˆ†é…) -->
                    <div class="flex-[1] md:flex-[1] bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col min-h-0 transition-colors">
                        <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
                            <h2 class="text-sm font-semibold text-gray-800 dark:text-gray-100">
                                <i class="fas fa-cloud-upload-alt mr-1 text-xs"></i><span data-i18n="upload">ä¸Šä¼ æ–‡ä»¶</span>
                            </h2>
                        </div>
                        <div class="flex-1 flex flex-col items-center justify-center p-3 min-h-0 overflow-auto">
                            <div id="dragArea" class="drag-area flex flex-row items-center justify-center gap-2 py-4 px-3 text-center w-full h-full min-h-[80px] cursor-pointer hover:border-blue-400 dark:hover:border-blue-500 transition-colors">
                                <i class="fas fa-upload text-sm text-gray-400 dark:text-gray-500"></i>
                                <div class="flex flex-col items-start gap-0.5">
                                    <span class="text-[10px] font-medium text-gray-700 dark:text-gray-300" data-i18n="uploadArea">ç‚¹å‡»æˆ–æ‹–æ‹½</span>
                                    <span class="text-[10px] text-gray-500 dark:text-gray-400" data-i18n="uploadHint">æœ€å¤§ 100MB</span>
                                </div>
                                <input type="file" id="fileInput" multiple class="hidden">
                            </div>

                            <!-- ä¸Šä¼ è¿›åº¦åˆ—è¡¨ -->
                            <div id="uploadProgress" class="hidden w-full mt-2">
                                <div class="mb-1 px-2">
                                    <span class="text-xs font-medium text-gray-700 dark:text-gray-300" data-i18n="uploadProgressTitle">ä¸Šä¼ è¿›åº¦</span>
                                </div>
                                <div id="progressList" class="space-y-1"></div>
                            </div>
                        </div>
                    </div>

                    <!-- æ–‡ä»¶åˆ—è¡¨å¡ç‰‡ (æ‰€æœ‰è®¾å¤‡ flex-2 æŒ‰æ¯”ä¾‹åˆ†é…) -->
                    <div class="flex-[2] md:flex-[2] bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col min-h-0 max-h-full transition-colors">
                        <!-- æ ‡é¢˜æ ï¼šä¸ä¸Šä¼ å¡ç‰‡æ ·å¼ç»Ÿä¸€ -->
                        <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex-shrink-0 flex items-center justify-between">
                            <h2 class="text-sm font-semibold text-gray-800 dark:text-gray-100">
                                <i class="fas fa-folder mr-1 text-xs"></i><span data-i18n="myFiles">æˆ‘çš„æ–‡ä»¶</span>
                            </h2>
                            <span id="storageInfo" class="text-[10px] text-gray-500 dark:text-gray-400">
                                <i class="fas fa-database text-[9px]"></i>
                                <span id="storageUsed">0 KB</span>/<span id="storageTotal">10 GB</span>
                            </span>
                        </div>
                        <!-- æ–‡ä»¶åˆ—è¡¨åŒºåŸŸ -->
                        <div class="flex-1 flex flex-col min-h-0">
                            <!-- æœç´¢å’Œæ’åºå·¥å…·æ  -->
                            <div class="px-4 py-2 bg-white dark:bg-gray-800 flex-shrink-0">
                                <div class="flex items-center gap-2">
                                    <input type="text" id="searchInput" placeholder="æœç´¢..." data-i18n-placeholder="searchPlaceholder"
                                           class="flex-1 min-w-0 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs leading-tight focus:outline-none focus:ring-1 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 h-[26px]">
                                    <select id="sortBy" class="flex-shrink-0 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs leading-tight focus:outline-none focus:ring-1 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-gray-100 h-[26px]">
                                        <option value="name" data-i18n="sortByName">åç§°</option>
                                        <option value="size" data-i18n="sortBySize">å¤§å°</option>
                                        <option value="date" data-i18n="sortByDate">æ—¥æœŸ</option>
                                    </select>
                                    <button id="refreshBtn" class="flex-shrink-0 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs leading-tight bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500 transition h-[26px]">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- æ–‡ä»¶åˆ—è¡¨ -->
                            <div id="fileList" class="flex-1 overflow-y-auto min-h-0">
                                <!-- æ–‡ä»¶åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                                <div id="emptyState" class="h-full flex flex-col items-center justify-center text-gray-400 dark:text-gray-500">
                                    <i class="fas fa-folder-open text-3xl mb-2"></i>
                                    <p class="text-xs" data-i18n="emptyState">æš‚æ— æ–‡ä»¶ï¼Œæ‹–æ‹½æˆ–é€‰æ‹©æ–‡ä»¶å¼€å§‹ä¸Šä¼ </p>
                                </div>
                            </div>
                            <!-- åˆ†é¡µæ§ä»¶ -->
                            <div id="paginationContainer" class="px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex-shrink-0">
                                <!-- åˆ†é¡µå°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å³ä¾§/éšè—åŒºåŸŸï¼šæ–‡ä»¶é¢„è§ˆå¡ç‰‡ï¼ˆæ¡Œé¢ç«¯æ˜¾ç¤ºï¼Œç§»åŠ¨ç«¯éšè—ï¼Œé€šè¿‡æ¨¡æ€æ¡†æ˜¾ç¤ºï¼‰ -->
                <!-- æ¡Œé¢ç«¯å¡«å……å…¨éƒ¨é«˜åº¦ -->
                <div class="hidden md:flex md:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden flex-col min-h-0 md:h-full transition-colors">
                    <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
                        <h2 class="text-sm font-semibold text-gray-800 dark:text-gray-100">
                            <i class="fas fa-eye mr-1 text-xs"></i><span data-i18n="preview">æ–‡ä»¶é¢„è§ˆ</span>
                        </h2>
                    </div>
                    <div id="previewArea" class="flex-1 p-5 min-h-0 flex flex-col">
                        <div class="h-full flex flex-col items-center justify-center text-gray-400 dark:text-gray-500">
                            <i class="fas fa-file-alt text-4xl mb-3"></i>
                            <p class="text-sm" data-i18n="selectFileToPreview">é€‰æ‹©æ–‡ä»¶æŸ¥çœ‹é¢„è§ˆ</p>
                            <p class="text-xs mt-1" data-i18n="supportedFormats">æ”¯æŒå›¾ç‰‡ã€PDFã€Markdownã€ä»£ç ç­‰æ ¼å¼</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ç§»åŠ¨ç«¯æ–‡ä»¶é¢„è§ˆæ¨¡æ€æ¡† -->
    <div id="mobilePreviewModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 md:hidden flex items-center justify-center p-5">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl h-full flex flex-col overflow-hidden">
            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 flex items-center justify-between flex-shrink-0">
                <button id="closeMobilePreview" class="text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100">
                    <i class="fas fa-times text-lg"></i>
                </button>
                <h3 class="text-sm font-semibold text-gray-800 dark:text-gray-100" data-i18n="preview">æ–‡ä»¶é¢„è§ˆ</h3>
                <div class="w-6"></div>
            </div>
            <!-- é¢„è§ˆå†…å®¹ -->
            <div id="mobilePreviewArea" class="flex-1 p-5 bg-gray-50 dark:bg-gray-900 flex flex-col min-h-0"></div>
        </div>
    </div>

    <!-- æ–‡ä»¶æ“ä½œæ¨¡æ€æ¡† -->
    <div id="fileModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 id="modalTitle" class="text-lg font-semibold text-gray-900 dark:text-gray-100">æ–‡ä»¶ä¿¡æ¯</h3>
                    <button id="closeModal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <!-- Toast é€šçŸ¥ -->
    <div id="toast" class="fixed top-20 left-1/2 transform -translate-x-1/2 hidden z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 flex items-center space-x-3 border border-gray-200 dark:border-gray-700">
            <i id="toastIcon" class="fas fa-check-circle text-green-500"></i>
            <span id="toastMessage" class="text-gray-800 dark:text-gray-100"></span>
        </div>
    </div>
    </div><!-- å…³é—­ appScreen -->

    <script>
        // API base URL - é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥æˆ–ä½¿ç”¨é»˜è®¤å€¼
        // ç”Ÿäº§ç¯å¢ƒï¼šéœ€è¦åœ¨æ„å»ºæ—¶è®¾ç½® VITE_API_BASE_URL ç¯å¢ƒå˜é‡
        // å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨ vite.config.js ä¸­é…ç½®çš„ä»£ç†
        window.ENV_API_BASE_URL = '%VITE_API_BASE_URL%';

        // Turnstile Site Key - é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥
        // æ³¨æ„ï¼šæ­¤å˜é‡ä¼šè¢« app.js ä¸­çš„ window.TURNSTILE_SITE_KEY ä½¿ç”¨
        window.VITE_TURNSTILE_SITE_KEY = '%VITE_TURNSTILE_SITE_KEY%';
    </script>
    <script src="js/app.js"></script>

    <!-- Service Worker æ³¨å†Œ -->
    <script>
        // æ³¨å†Œ Service Workerï¼ˆPWA æ”¯æŒï¼‰
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then((registration) => {
                        console.log('[PWA] Service Worker æ³¨å†ŒæˆåŠŸ:', registration.scope);

                        // æ£€æŸ¥æ›´æ–°
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log('[PWA] å‘ç°æ–°ç‰ˆæœ¬ï¼Œå‡†å¤‡æ›´æ–°...');

                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // æ–°ç‰ˆæœ¬å·²å®‰è£…ï¼Œæç¤ºç”¨æˆ·åˆ·æ–°
                                    console.log('[PWA] æ–°ç‰ˆæœ¬å·²å°±ç»ªï¼Œè¯·åˆ·æ–°é¡µé¢');

                                    // å¯é€‰ï¼šæ˜¾ç¤ºæ›´æ–°æç¤º
                                    if (confirm('æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬ï¼Œæ˜¯å¦ç«‹å³æ›´æ–°ï¼Ÿ')) {
                                        newWorker.postMessage({ type: 'SKIP_WAITING' });
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.error('[PWA] Service Worker æ³¨å†Œå¤±è´¥:', error);
                    });

                // ç›‘å¬ Service Worker æ§åˆ¶æƒå˜æ›´
                navigator.serviceWorker.addEventListener('controllerchange', () => {
                    console.log('[PWA] Service Worker å·²æ›´æ–°');
                });
            });
        }
    </script>
</body>
</html>